<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.5625 'Noto Sans JP',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Noto Sans JP',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Noto Sans JP',serif;font-weight:400;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Noto Sans JP',serif;font-weight:400;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Noto Sans JP',serif;font-weight:400;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Noto Sans JP',serif;font-weight:400;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Noto Sans JP',serif;font-weight:400;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Noto Sans JP',serif;font-weight:400;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}ul{margin-left:1.5625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.5625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;font-size:0.85rem;line-height:1.5625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;font-size:1rem;line-height:1.5625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}blockquote{margin-left:0;margin-right:1.5625rem;margin-top:0;padding-bottom:0;padding-left:1.75781rem;padding-right:0;padding-top:0;margin-bottom:1.5625rem;font-size:1.1487rem;line-height:1.5625rem;color:hsla(0,0%,0%,0.59);border-left:0.58594rem solid;border-color:#fcea0e;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.5625rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.5625rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.5625rem;margin-bottom:calc(1.5625rem / 2);margin-top:calc(1.5625rem / 2);}li > ul{margin-left:1.5625rem;margin-bottom:calc(1.5625rem / 2);margin-top:calc(1.5625rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.5625rem / 2);}code{font-size:0.85rem;line-height:1.5625rem;}kbd{font-size:0.85rem;line-height:1.5625rem;}samp{font-size:0.85rem;line-height:1.5625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.04167rem;padding-right:1.04167rem;padding-top:0.78125rem;padding-bottom:calc(0.78125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#fb251b;text-decoration:none;}a:hover,a:active{color:hsla(0,0%,0%,0.8);}h1,h2,h3,h4,h5,h6{margin-top:3.125rem;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.5625rem;color:hsla(0,0%,0%,0.8);font-weight:400;}blockquote cite:before{content:"— ";}@media only screen and (max-width:480px){blockquote{margin-left:-1.17188rem;margin-right:0;border-left:0.29297rem solid;border-color:#fcea0e;padding-left:0.87891rem;}}</style><meta data-react-helmet="true" name="twitter:creator" content="@drobune"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><title data-react-helmet="true">chef-soloをec2に向けてcookしたらsudoのスクリプトが動かせなかった ━━━━━ DROBUNE Weblog</title><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link data-react-helmet="true" rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><meta data-react-helmet="true" name="msapplication-TileColor" content="#da532c"/><meta data-react-helmet="true" name="theme-color" content="#ffffff"/><meta data-react-helmet="true" name="description" content="Programming, Surfing, Snowboard, Trail, Spearfishing, Free-diving, ..."/><meta data-react-helmet="true" property="og:title" content="chef-soloをec2に向けてcookしたらsudoのスクリプトが動かせなかった"/><meta data-react-helmet="true" property="og:description" content="Programming, Surfing, Snowboard, Trail, Spearfishing, Free-diving, ..."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:image" content="https://blog.drobune.nl/blog_logo.jpg"/><meta data-react-helmet="true" name="twitter:image" content="https://blog.drobune.nl/blog_logo.jpg"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta name="generator" content="Gatsby 2.25.4"/><meta data-react-helmet="true" name="twitter:title" content="chef-soloをec2に向けてcookしたらsudoのスクリプトが動かせなかった"/><meta data-react-helmet="true" name="twitter:description" content="Programming, Surfing, Snowboard, Trail, Spearfishing, Free-diving, ..."/><style data-styled="" data-styled-version="5.2.1">.Qkfab{color:black;line-height:8vh;}/*!sc*/
data-styled.g1[id="navBar__Logo-sc-1pzjae9-0"]{content:"Qkfab,"}/*!sc*/
.CgUkV{-webkit-text-decoration:none;text-decoration:none;color:red;display:inline-block;white-space:nowrap;margin:0 1vw;-webkit-transition:all 200ms ease-in;transition:all 200ms ease-in;position:relative;}/*!sc*/
.CgUkV:after{position:absolute;bottom:0;left:0;right:0;width:0%;content:".";color:transparent;background:goldenrod;height:1px;-webkit-transition:all 0.4s ease-in;transition:all 0.4s ease-in;}/*!sc*/
.CgUkV:hover{color:black;}/*!sc*/
.CgUkV:hover::after{width:100%;}/*!sc*/
@media (max-width:768px){.CgUkV{padding:20px 0;font-size:1.5rem;z-index:6;}}/*!sc*/
data-styled.g2[id="navBar__NavItem-sc-1pzjae9-1"]{content:"CgUkV,"}/*!sc*/
.bUWPbo{height:10vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background-color:#fff;position:relative;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;text-transform:uppercase;border-bottom:2px solid #33333320;margin:0 auto;padding:0 5vw;z-index:2;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}/*!sc*/
@media (max-width:768px){.bUWPbo{position:-webkit-sticky;position:sticky;height:8vh;top:0;left:0;right:0;left:0;}}/*!sc*/
data-styled.g3[id="navBar__Navigation-sc-1pzjae9-2"]{content:"bUWPbo,"}/*!sc*/
.IcAql{display:none;height:100%;cursor:pointer;padding:0 2vw;}/*!sc*/
@media (max-width:768px){.IcAql{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}/*!sc*/
data-styled.g4[id="navBar__Toggle-sc-1pzjae9-3"]{content:"IcAql,"}/*!sc*/
.eHtfng{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:100%;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media (max-width:768px){.eHtfng{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:fixed;width:100%;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;padding-top:10vh;background-color:#fff;-webkit-transition:all 0.3s ease-in;transition:all 0.3s ease-in;top:8vh;left:-100%;}}/*!sc*/
data-styled.g5[id="navBar__Navbox-sc-1pzjae9-4"]{content:"eHtfng,"}/*!sc*/
.dPzTdo{background-color:#111;width:30px;height:3px;-webkit-transition:all .3s linear;transition:all .3s linear;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;position:relative;-webkit-transform:inherit;-ms-transform:inherit;transform:inherit;}/*!sc*/
.dPzTdo::before,.dPzTdo::after{width:30px;height:3px;background-color:#111;content:"";position:absolute;-webkit-transition:all 0.3s linear;transition:all 0.3s linear;}/*!sc*/
.dPzTdo::before{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);top:-10px;}/*!sc*/
.dPzTdo::after{opacity:1;-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);top:10px;}/*!sc*/
data-styled.g6[id="navBar__Hamburger-sc-1pzjae9-5"]{content:"dPzTdo,"}/*!sc*/
.cqYIkx{margin:0 auto;max-width:650px;padding:0 1rem;}/*!sc*/
data-styled.g7[id="layout__BodyContainer-sc-1k7q7u2-0"]{content:"cqYIkx,"}/*!sc*/
.guYTBu{margin:1rem 0;}/*!sc*/
data-styled.g8[id="blogTemplate__GoToTop-sc-16qddwq-0"]{content:"guYTBu,"}/*!sc*/
</style><style data-href="/styles.ac46754348c23bd5e0f2.css">code[class*=language-],pre[class*=language-]{color:#000;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{position:relative;margin:.5em 0;overflow:visible;padding:0}pre[class*=language-]>code{position:relative;border-left:10px solid #358ccb;box-shadow:-1px 0 0 0 #358ccb,0 0 0 1px #dfdfdf;background-color:#fdfdfd;background-image:linear-gradient(transparent 50%,rgba(69,142,209,.04) 0);background-size:3em 3em;background-origin:content-box;background-attachment:local}code[class*=language-]{max-height:inherit;height:inherit;padding:0 1em;display:block;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdfdfd;box-sizing:border-box;margin-bottom:1em}:not(pre)>code[class*=language-]{position:relative;padding:.2em;border-radius:.3em;color:#c92c2c;border:1px solid rgba(0,0,0,.1);display:inline;white-space:normal}pre[class*=language-]:after,pre[class*=language-]:before{content:"";z-index:-2;display:block;position:absolute;bottom:.75em;left:.18em;width:40%;height:20%;max-height:13em;box-shadow:0 13px 8px #979797;transform:rotate(-2deg)}pre[class*=language-]:after{right:.75em;left:auto;transform:rotate(2deg)}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7d8b99}.token.punctuation{color:#5f6364}.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.number,.token.property,.token.symbol,.token.tag{color:#c92c2c}.token.attr-name,.token.builtin,.token.char,.token.function,.token.inserted,.token.selector,.token.string{color:#2f9c0a}.token.entity,.token.operator,.token.url,.token.variable{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.class-name,.token.keyword{color:#1990b8}.token.important,.token.regex{color:#e90}.language-css .token.string,.style .token.string{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.namespace{opacity:.7}@media screen and (max-width:767px){pre[class*=language-]:after,pre[class*=language-]:before{bottom:14px;box-shadow:none}}pre[class*=language-].line-numbers.line-numbers{padding-left:0}pre[class*=language-].line-numbers.line-numbers code{padding-left:3.8em}pre[class*=language-].line-numbers.line-numbers .line-numbers-rows{left:0}pre[class*=language-][data-line]{padding-top:0;padding-bottom:0;padding-left:0}pre[data-line] code{position:relative;padding-left:4em}pre .line-highlight{margin-top:0}.iframe-container{position:relative;padding-bottom:56.25%;padding-top:30px;height:0;overflow:hidden}.iframe-container embed,.iframe-container iframe,.iframe-container object{position:absolute;top:0;left:0;width:100%;height:100%}</style><link href="//fonts.googleapis.com/css?family=Source+Serif+Pro:600|Source+Sans+Pro:400,400i,700|Noto+Sans+JP:400" rel="stylesheet" type="text/css"/><link rel="alternate" type="application/rss+xml" title="Your Site&#x27;s RSS Feed" href="https://feeds.feedburner.com/gatsby/blog"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/component---src-templates-blog-template-tsx-abd36dbe06aa1d7701fb.js"/><link as="script" rel="preload" href="/commons-4f4550e7b80626ba11e2.js"/><link as="script" rel="preload" href="/framework-de237a875aa45b276a9d.js"/><link as="script" rel="preload" href="/app-ee79597a05e22d56fbb5.js"/><link as="script" rel="preload" href="/webpack-runtime-df10b38ea225c88d0391.js"/><link as="fetch" rel="preload" href="/page-data/blog/a052603c43fdc434d423/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1342192543.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><nav class="navBar__Navigation-sc-1pzjae9-2 bUWPbo"><a class="navBar__Logo-sc-1pzjae9-0 Qkfab" href="/">Drobune Weblog</a><div class="navBar__Toggle-sc-1pzjae9-3 IcAql"><div class="navBar__Hamburger-sc-1pzjae9-5 dPzTdo"></div></div><div open="" class="navBar__Navbox-sc-1pzjae9-4 eHtfng"><a href="https://drobune.nl" class="navBar__NavItem-sc-1pzjae9-1 CgUkV">Profile</a><a class="navBar__NavItem-sc-1pzjae9-1 CgUkV" href="/404">Gallery</a><a href="https://drobune.nl" class="navBar__NavItem-sc-1pzjae9-1 CgUkV">Contact</a></div></nav><div class="layout__BodyContainer-sc-1k7q7u2-0 cqYIkx"><div><div class="blog-post"><h1>chef-soloをec2に向けてcookしたらsudoのスクリプトが動かせなかった</h1><h2>2014-06-11</h2><div class="blog-post-content"><p>tty経由でないと怒られるようになった（前はそんな事なかった気がする気がする）</p>
<p>原因はAmazonのLinuxのデフォの/etc/sudoersに下の一行があるから。</p>
<div class="code-frame" data-lang="apache"><div class="highlight"><pre>Defaults    requiretty
</pre></div></div>
<p>これをコメントアウトするようにchef-soloのレシピを追加して回避した。</p>
<p>もしかしたらwheel使うのが正しいのだろうか？？</p>
<h2>
<span id="手順" class="fragment"></span><a href="#%E6%89%8B%E9%A0%86"><i class="fa fa-link"></i></a>手順</h2>
<p>recipeに追加したコード</p>
<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span class="n">directory</span> <span class="s1">'/etc/sudoers.d'</span> <span class="k">do</span>
    <span class="n">mode</span>    <span class="s1">'0755'</span>
    <span class="n">owner</span>   <span class="s1">'root'</span>
<span class="k">end</span>
<p><span class="n">template</span> <span class="s2">"sudoers"</span> <span class="k">do</span>
<span class="n">source</span> <span class="s1">'sudoers.erb'</span>
<span class="n">mode</span>   <span class="s1">'0440'</span>
<span class="n">owner</span>  <span class="s1">'root'</span>
<span class="k">end</span></p>
</pre></div></div>
<p>/template/sudoers.erbを追加</p>
<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span class="c">## Sudoers allows particular users to run various commands as</span>
<span class="c">## the root user, without needing the root password.</span>
<span class="c">##</span>
<span class="c">## Examples are provided at the bottom of the file for collections</span>
<span class="c">## of related commands, which can then be delegated out to particular</span>
<span class="c">## users or groups.</span>
<span class="c">## </span>
<span class="c">## This file must be edited with the 'visudo' command.</span>
<p><span class="c">## Host Aliases</span>
<span class="c">## Groups of machines. You may prefer to use hostnames (perhaps using </span>
<span class="c">## wildcards for entire domains) or IP addresses instead.</span>
<span class="c"># Host<em>Alias     FILESERVERS = fs1, fs2</span>
<span class="c"># Host</em>Alias     MAILSERVERS = smtp, smtp2</span></p>
<p><span class="c">## User Aliases</span>
<span class="c">## These aren't often necessary, as you can use regular groups</span>
<span class="c">## (ie, from files, LDAP, NIS, etc) in this file - just use %groupname </span>
<span class="c">## rather than USERALIAS</span>
<span class="c"># User_Alias ADMINS = jsmith, mikem</span></p>
<p><span class="c">## Command Aliases</span>
<span class="c">## These are groups of related commands...</span></p>
<p><span class="c">## Networking</span>
<span class="c"># Cmnd_Alias NETWORKING = /sbin/route, /sbin/ifconfig, /bin/ping, /sbin/dhclient, /usr/bin/net, /sbin/iptables, /usr/bin/rfcomm, /usr/bin/wvdial, /sbin/iwconfig, /sbin/mii-tool</span></p>
<p><span class="c">## Installation and management of software</span>
<span class="c"># Cmnd_Alias SOFTWARE = /bin/rpm, /usr/bin/up2date, /usr/bin/yum</span></p>
<p><span class="c">## Services</span>
<span class="c"># Cmnd_Alias SERVICES = /sbin/service, /sbin/chkconfig</span></p>
<p><span class="c">## Updating the locate database</span>
<span class="c"># Cmnd_Alias LOCATE = /usr/bin/updatedb</span></p>
<p><span class="c">## Storage</span>
<span class="c"># Cmnd_Alias STORAGE = /sbin/fdisk, /sbin/sfdisk, /sbin/parted, /sbin/partprobe, /bin/mount, /bin/umount</span></p>
<p><span class="c">## Delegating permissions</span>
<span class="c"># Cmnd_Alias DELEGATING = /usr/sbin/visudo, /bin/chown, /bin/chmod, /bin/chgrp </span></p>
<p><span class="c">## Processes</span>
<span class="c"># Cmnd_Alias PROCESSES = /bin/nice, /bin/kill, /usr/bin/kill, /usr/bin/killall</span></p>
<p><span class="c">## Drivers</span>
<span class="c"># Cmnd_Alias DRIVERS = /sbin/modprobe</span></p>
<p><span class="c"># Defaults specification</span></p>
<p><span class="c">#</span>
<span class="c"># Disable "ssh hostname sudo &#x3C;cmd>", because it will show the password in clear. </span>
<span class="c">#         You have to run "ssh -t hostname sudo &#x3C;cmd>".</span>
<span class="c">#</span>
<span class="c"># Defaults    requiretty !!!!!!!!!HERE!!!!!!!!!</span></p>
<p><span class="c">#</span>
<span class="c"># Refuse to run if unable to disable echo on the tty. This setting should also be</span>
<span class="c"># changed in order to be able to use sudo without a tty. See requiretty above.</span>
<span class="c">#</span>
Defaults   <span class="o">!</span>visiblepw</p>
<p><span class="c">#</span>
<span class="c"># Preserving HOME has security implications since many programs</span>
<span class="c"># use it when searching for configuration files. Note that HOME</span>
<span class="c"># is already set when the the env<em>reset option is enabled, so</span>
<span class="c"># this option is only effective for configurations where either</span>
<span class="c"># env</em>reset is disabled or HOME is present in the env<em>keep list.</span>
<span class="c">#</span>
Defaults    always</em>set_home</p>
<p>Defaults    env<em>reset
Defaults    env</em>keep <span class="o">=</span>  <span class="s2">"COLORS DISPLAY HOSTNAME HISTSIZE INPUTRC KDEDIR LS<em>COLORS"</span>
Defaults    env</em>keep +<span class="o">=</span> <span class="s2">"MAIL PS1 PS2 QTDIR USERNAME LANG LC<em>ADDRESS LC</em>CTYPE"</span>
Defaults    env<em>keep +<span class="o">=</span> <span class="s2">"LC</em>COLLATE LC<em>IDENTIFICATION LC</em>MEASUREMENT LC<em>MESSAGES"</span>
Defaults    env</em>keep +<span class="o">=</span> <span class="s2">"LC<em>MONETARY LC</em>NAME LC<em>NUMERIC LC</em>PAPER LC<em>TELEPHONE"</span>
Defaults    env</em>keep +<span class="o">=</span> <span class="s2">"LC<em>TIME LC</em>ALL LANGUAGE LINGUAS <em>XKB</em>CHARSET XAUTHORITY"</span></p>
<p><span class="c">#</span>
<span class="c"># Adding HOME to env<em>keep may enable a user to run unrestricted</span>
<span class="c"># commands via sudo.</span>
<span class="c">#</span>
<span class="c"># Defaults   env</em>keep += "HOME"</span></p>
<p>Defaults    secure_path <span class="o">=</span> /sbin:/bin:/usr/sbin:/usr/bin</p>
<p><span class="c">## Next comes the main part: which users can run what software on </span>
<span class="c">## which machines (the sudoers file can be shared between multiple</span>
<span class="c">## systems).</span>
<span class="c">## Syntax:</span>
<span class="c">##</span>
<span class="c">##  user    MACHINE=COMMANDS</span>
<span class="c">##</span>
<span class="c">## The COMMANDS section may have other options added to it.</span>
<span class="c">##</span>
<span class="c">## Allow root to run any commands anywhere </span>
root    <span class="nv">ALL</span><span class="o">=(</span>ALL<span class="o">)</span>   ALL</p>
<p><span class="c">## Allows members of the 'sys' group to run networking, software, </span>
<span class="c">## service management apps and more.</span>
<span class="c"># %sys ALL = NETWORKING, SOFTWARE, SERVICES, STORAGE, DELEGATING, PROCESSES, LOCATE, DRIVERS</span></p>
<p><span class="c">## Allows people in group wheel to run all commands</span>
<span class="c"># %wheel    ALL=(ALL)   ALL</span></p>
<p><span class="c">## Same thing without a password</span>
<span class="c"># %wheel    ALL=(ALL)   NOPASSWD: ALL</span></p>
<p><span class="c">## Allows members of the users group to mount and unmount the </span>
<span class="c">## cdrom as root</span>
<span class="c"># %users  ALL=/sbin/mount /mnt/cdrom, /sbin/umount /mnt/cdrom</span></p>
<p><span class="c">## Allows members of the users group to shutdown this system</span>
<span class="c"># %users  localhost=/sbin/shutdown -h now</span></p>
<p><span class="c">## Read drop-in files from /etc/sudoers.d (the # here does not mean a comment)</span>
<span class="c">#includedir /etc/sudoers.d</span></p>
</pre></div></div>
<p>参考；<br>
<a href="http://d.hatena.ne.jp/shibainu55/20090720/1248053978" class="autolink" rel="nofollow noopener" target="_blank">http://d.hatena.ne.jp/shibainu55/20090720/1248053978</a></p></div></div><span><a href="/tags/Linux">#<!-- -->Linux<!-- -->  </a></span><span><a href="/tags/EC2">#<!-- -->EC2<!-- -->  </a></span><span><a href="/tags/chef">#<!-- -->chef<!-- -->  </a></span><span><a href="/tags/chef-solo">#<!-- -->chef-solo<!-- -->  </a></span><div class="blogTemplate__GoToTop-sc-16qddwq-0 guYTBu"><a href="/">Go to top page</a></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-102174140-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-102174140-1', 'drobune.nl', {"sampleRate":5,"siteSpeedSampleRate":10});
      ga('set', 'anonymizeIp', true);
      ga('require', '');
      ga('set', 'expId', '');
      ga('set', 'expVar', '');
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/a052603c43fdc434d423/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-8f27f34e33d6936c0c6c.js"],"app":["/app-ee79597a05e22d56fbb5.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-4c4973628feb419444ee.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-bd43bb996748558c658f.js"],"component---src-pages-tags-tsx":["/component---src-pages-tags-tsx-4ecd5c152facbbf87852.js"],"component---src-templates-blog-template-tsx":["/component---src-templates-blog-template-tsx-abd36dbe06aa1d7701fb.js"],"component---src-templates-tags-tsx":["/component---src-templates-tags-tsx-df4781e5f81cd8695140.js"]};/*]]>*/</script><script src="/polyfill-8f27f34e33d6936c0c6c.js" nomodule=""></script><script src="/webpack-runtime-df10b38ea225c88d0391.js" async=""></script><script src="/app-ee79597a05e22d56fbb5.js" async=""></script><script src="/framework-de237a875aa45b276a9d.js" async=""></script><script src="/commons-4f4550e7b80626ba11e2.js" async=""></script><script src="/component---src-templates-blog-template-tsx-abd36dbe06aa1d7701fb.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script></body></html>