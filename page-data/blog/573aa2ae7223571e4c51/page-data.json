{"componentChunkName":"component---src-templates-blog-template-tsx","path":"/blog/573aa2ae7223571e4c51/","result":{"data":{"markdownRemark":{"html":"<p>不恰好だけど動くようになったからメモっとく<br>\nsshキーの問題さえクリアすれば簡単</p>\n<h3>\n<span id=\"テストするサーバに接続できるssh秘密鍵をcircleciに登録\" class=\"fragment\"></span><a href=\"#%E3%83%86%E3%82%B9%E3%83%88%E3%81%99%E3%82%8B%E3%82%B5%E3%83%BC%E3%83%90%E3%81%AB%E6%8E%A5%E7%B6%9A%E3%81%A7%E3%81%8D%E3%82%8Bssh%E7%A7%98%E5%AF%86%E9%8D%B5%E3%82%92circleci%E3%81%AB%E7%99%BB%E9%8C%B2\"><i class=\"fa fa-link\"></i></a>テストするサーバに接続できるssh秘密鍵をCircleCIに登録。</h3>\n<hr>\n<p>project settingsのssh Permissionsから秘密鍵を登録できる。</p>\n<p><a href=\"https://qiita-user-contents.imgix.net/http%3A%2F%2Fgyazo.com%2F74884f7607e614c16e1c9a5f270573d9.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=456caebadaf547fd5ae5b10b5a9601e8\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/http%3A%2F%2Fgyazo.com%2F74884f7607e614c16e1c9a5f270573d9.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=456caebadaf547fd5ae5b10b5a9601e8\" data-canonical-src=\"http://gyazo.com/74884f7607e614c16e1c9a5f270573d9.png\" srcset=\"https://qiita-user-contents.imgix.net/http%3A%2F%2Fgyazo.com%2F74884f7607e614c16e1c9a5f270573d9.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=15a5c71d62ad4d4c001452cf55b15e5a 1x\" loading=\"lazy\"></a></p>\n<h3>\n<span id=\"sshconfigを作成\" class=\"fragment\"></span><a href=\"#sshconfig%E3%82%92%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>~/.ssh/configを作成</h3>\n<hr>\n<p>serverspecでテストする対象のサーバのsshログイン情報を書き出すscriptを動かす</p>\n<p>完成後はこんな感じ。</p>\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>Host mytest-server\n    User testuser\n    HostName xxx.xxx.xxx.xxx\n    StrictHostKeyChecking no\n    UserKnownHostsFile /dev/null\n    IdentityFile ~/.ssh/id_rsa\n    ForwardAgent yes\n...\n</pre></div></div>\n<p>あとはrakeタスクにservespecを追加しておけばOK.</p>\n<p>dockerとかvagrant使って、CI上でプロビジョニングしてテストするのが王道だと思いますが、<br>\nとりあえず書いたserverspecを試したいときにどうぞ。</p>","frontmatter":{"date":"2015-04-27","slug":"/blog/573aa2ae7223571e4c51","title":"既存サーバへのserverspecをCircleCIで回す","image":null,"tags":["devops","CircleCI","serverspec"]}}},"pageContext":{"slug":"/blog/573aa2ae7223571e4c51"}},"staticQueryHashes":["1342192543"]}