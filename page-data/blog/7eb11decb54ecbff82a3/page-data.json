{"componentChunkName":"component---src-templates-blog-template-tsx","path":"/blog/7eb11decb54ecbff82a3/","result":{"data":{"markdownRemark":{"html":"<h3>\n<span id=\"背景\" class=\"fragment\"></span><a href=\"#%E8%83%8C%E6%99%AF\"><i class=\"fa fa-link\"></i></a>背景</h3>\n<hr>\n<p>herokuアプリにてエンドユーザがサブドメインでページを作れるように改善することになりました。<br>\nお察しかもしれませんが、ハマりポイントがあったのでメモとして残しておきます。  もちろんすべて無料です。</p>\n<hr>\n<h3>\n<span id=\"1-dnsサーバの設定\" class=\"fragment\"></span><a href=\"#1-dns%E3%82%B5%E3%83%BC%E3%83%90%E3%81%AE%E8%A8%AD%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>1. DNSサーバの設定</h3>\n<p>herokuアプリは固定IPをもっていないため、サブドメインについてはCNAMEレコードのみ登録します。<br><br>\nムームードメインでサブドメインの設定をしようとしましたが、<br>\nサブドメイン名をワイルドカードで指定することができず、次のdnsホスティングサービスを利用しました。  </p>\n<ul>\n<li>\n<a href=\"https://dozens.jp\" rel=\"nofollow noopener\" target=\"_blank\">Dosens</a><br>\n</li>\n</ul>\n<p><a href=\"http://sitedo3.s3.amazonaws.com/2013/09/dozens.png\" rel=\"nofollow noopener\" target=\"_blank\"><img src=\"http://sitedo3.s3.amazonaws.com/2013/09/dozens-300x217.png\" alt=\"dozens\" width=\"300\" height=\"217\" data-canonical-src=\"http://sitedo3.s3.amazonaws.com/2013/09/dozens-300x217.png\" loading=\"lazy\"></a></p>\n<p>ここではルートドメインと任意のサブドメインについてのDNSレコードを登録します。</p>\n<p>ルートドメインについては、\"<del> add heroku record \"にて自動で設定してくれます。</del><br><br>\nではなく、次のIPをAレコードとして登録してください。2013年9月時点の情報デス。<br><br>\nちなみにDozensが設定してくれるIPは使えなかったのでお気をつけください。  </p>\n<blockquote>\n<p>Address: 75.101.163.44<br><br>\nAddress: 75.101.145.87<br><br>\nAddress: 174.129.212.2  </p>\n</blockquote>\n<p>サブドメインについてはcnameレコードを設定し、\" *.取得したドメイン \"とherokuアプリのデフォルトドメイン \" xxxxx.herokuapp.com \"をひもづけます。  </p>\n<p>ちなみにherokuのアドオンに' Zerigo DNS 'というものがありますが、ページビューに応じて課金が発生するので、<br><br>\nつかってません。</p>\n<h3>\n<span id=\"2-herokuappの設定\" class=\"fragment\"></span><a href=\"#2-herokuapp%E3%81%AE%E8%A8%AD%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>2. herokuappの設定</h3>\n<p>herokuにログインしてsettingから以下のドメインを追加します。  </p>\n<blockquote>\n<p>\" *.取得したドメイン \"<br><br>\n\" 取得したドメイン \"  </p>\n</blockquote>\n<p>反映まで一日ほど待つと。。。できた！  </p>\n<p>アプリ側（Rails）でのルーティングの設定については会社の後輩がハマってたので、<br><br>\n書いてくれるんじゃないかなw</p>","frontmatter":{"date":"2014-05-07","slug":"/blog/7eb11decb54ecbff82a3","title":"herokuアプリで任意のサブドメインを使う。-DNSまわりの設定-","image":null,"tags":["Rails","Heroku","dns"]}}},"pageContext":{"slug":"/blog/7eb11decb54ecbff82a3"}},"staticQueryHashes":["1342192543"]}