{"componentChunkName":"component---src-templates-blog-template-tsx","path":"/blog/blog-post_102/","result":{"data":{"markdownRemark":{"html":"<p>一部のページで初回アクセスのときだけ一部のスタイルが崩れる現象に困ったのでその対処法をメモ。</p>\n<h3>期待される表示</h3>\n<p><img src=\"https://gyazo.com/598cb024b47246c480d6bbf83da33c74.png\"></p>\n<h3>初回アクセス時の表示</h3>\n<p><img src=\"https://gyazo.com/c6c2ae6c228d9519786984284e040d9d.png\"></p>\n<p>リロードすると期待される表示になる。</p>\n<p>URLのtrailing slashがあると301リダイレクトされるので、それが原因かと疑ったが違った。</p>\n<p>結局gatsby-browser.jsのここ問題だったようでLayoutを呼ぶ場所をブラウザ側ではなくSSG側にもっていくことで解消した。</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-diff-jsx line-numbers\"><code class=\"language-diff-jsx\"><span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span> import Layout from \"./src/components/layout\"\n</span>\n<span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span> export const wrapPageElement = ({ element, props }) => {\n<span class=\"token prefix deleted\">-</span>   return &lt;Layout {...props}>{element}&lt;/Layout>\n<span class=\"token prefix deleted\">-</span> }</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>コミット\n<a href=\"https://github.com/drobune/weblog/commit/1916ea3a6902040b39100c1f7e7c29dbeef19f79#diff-2f15e01c012970971795674aff1caf0619691d7d47cfe1b5be49ac414bac09a2\">dfdf1b6 </a></p>\n<p>gatsby-browser.jsファイルはブラウザで実行されるときの共通処理を書いたりするという認識なんだけど公式の通りCommonJSで書いたらエラーになったりするのでイマイチよくわかってない...</p>","frontmatter":{"date":"2020-11-18","slug":"/blog/blog-post_102","title":"GatsbyJSの初回ロード時にスタイルが一部崩れる","image":null,"tags":["javascript","gatsby"]}}},"pageContext":{"slug":"/blog/blog-post_102"}},"staticQueryHashes":["1342192543"]}